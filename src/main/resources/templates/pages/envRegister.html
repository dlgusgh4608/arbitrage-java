<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/myPage}">

<head>
    <title>API등록/수정</title>
    <link rel="stylesheet" th:href="@{/css/envRegister.css}">
</head>

<section layout:fragment="myPage">
    <article class="wrapper">
        <form method="post" th:action th:object="${formDto}" id="envRegisterForm">
            <div class="exchange-section border-gray3 mb-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h3 class="fs-5 mb-0">업비트 API</h3>
                    <button type="button" class="btn btn-link guide-btn text-link" data-bs-toggle="collapse"
                        data-bs-target="#upbitGuide" aria-expanded="false">
                        발급 가이드 보기
                    </button>
                </div>

                <div class="collapse mb-3" id="upbitGuide">
                    <div class="ele-bg-color border-point-color rounded p-3">
                        <h4 class="fs-6 fw-bold">업비트 API 키 발급 방법</h4>
                        <ol class="guide-steps">
                            <li>
                                업비트 로그인 후
                                <a class="text-link-color" href="https://upbit.com/service_center/open_api_guide"
                                    target="_blank">
                                    OpenAPI 관리
                                </a>
                                페이지로 이동
                            </li>
                            <li>보안인증 완료 후 [Open API 관리] 메뉴 선택</li>
                            <li>[자산 조회, 주문 조회, 주문 하기] 권한 체크</li>
                            <li>IP 주소에 123.456.78.9 등록 후 발급</li>
                        </ol>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="upbitAccessKey" class="form-label fs-6">Access Key</label>
                    <input type="text" class="input" id="upbitAccessKey" th:field="*{upbitAccessKey}">
                    <div class="valid-warning" th:errors=*{upbitAccessKey}></div>
                </div>
                <div class="mb-3">
                    <label for="upbitSecretKey" class="form-label fs-6">Secret Key</label>
                    <input type="password" class="input" id="upbitSecretKey" th:field="*{upbitSecretKey}">
                    <div class="valid-warning" th:errors=*{upbitSecretKey}></div>
                </div>
            </div>

            <div class="exchange-section border-gray3 mb-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h3 class="fs-5 mb-0">바이낸스 API</h3>
                    <button type="button" class="btn btn-link guide-btn text-link" data-bs-toggle="collapse"
                        data-bs-target="#binanceGuide" aria-expanded="false">
                        발급 가이드 보기
                    </button>
                </div>

                <div class="collapse mb-3" id="binanceGuide">
                    <div class="ele-bg-color border-point-color rounded p-3">
                        <h4 class="fs-6 fw-bold">바이낸스 API 키 발급 방법</h4>
                        <ol class="guide-steps">
                            <li>
                                바이낸스 로그인 후
                                <a class="text-link-color" href="https://www.binance.com/en/my/settings/api-management"
                                    target="_blank">
                                    API Management
                                </a>
                                페이지로 이동
                            </li>
                            <li>[Create API] 버튼 클릭</li>
                            <li>[System generated] 버튼 클릭</li>
                            <li>API 이름 입력 및 [Read Only] 권한만 체크</li>
                            <li>[Enable Reading, Enable Futures] 권한 체크</li>
                            <li>IP Address에 123.456.78.9 등록 후 발급</li>
                        </ol>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="binanceAccessKey" class="form-label fs-6">Access Key</label>
                    <input type="text" class="input" id="binanceAccessKey" th:field="*{binanceAccessKey}">
                    <div class="valid-warning" th:errors=*{binanceAccessKey}></div>
                </div>
                <div class="mb-3">
                    <label for="binanceSecretKey" class="form-label fs-6">Secret Key</label>
                    <input type="password" class="input" id="binanceSecretKey" th:field="*{binanceSecretKey}">
                    <div class="valid-warning" th:errors=*{binanceSecretKey}></div>
                </div>
            </div>

            <button type="submit" class="btn-point w-100 opacity-hover">등록하기</button>

            <script th:inline="javascript">
                const hasServerError = /*[[${#fields.hasGlobalErrors()}]]*/ false;

                if (hasServerError) {
                    const errorMessages = /*[[${#fields.errors()}]]*/[];
                    alert(errorMessages[0].concat(' 다시 시도해주세요.'))
                }
            </script>
        </form>
    </article>
</section>

</html>